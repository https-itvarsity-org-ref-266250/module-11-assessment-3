<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="author" content="">
	
	<title>Mini Blog</title>
	
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/custom.css">
	<link href="fontawsome/css/all.css" rel="stylesheet">
	</head>

	<body onload="init()">
	    <div class="d-flex flex-column align-items-center p-3 bg-white border-bottom box-shadow fixed-top">
		  <img src="img/mini-blog-logo.png" height="40"/>
			<nav>
			  <a id="getLatest" class="p2 text-dark" href="#">Latest</a>
			  <a id="getAll" class="p-2 text-dark active" href="#">All</a>
			  <a id="getPopular" class="p-2 text-dark" href="#">Popular</a>
			</nav>
		</div>
		
		<div class="blog-header mx-auto text-center">
		     <h1>Is it beautiful?</h1>
			<p class="lead">All the latest <strong><em>Tech</em></strong>, <strong><em>Design</em></strong><strong><em> and </em></strong><strong><em>Development</em></strong>  <strong><em>news from around the world.</em></strong></p>
		</div>
		
		<div class="container team">
			<div class="col-lg-4">
		   <img src="img/thandi.jpg" class="img-thumbnail rounded-circle" width="90"/>
		    <img src="img/john.jpg" class="img-thumbnail rounded-circle" width="90"/>
			 <img src="img/sally.jpg" class="img-thumbnail rounded-circle" width="90"/>
			 <img src="img/lungi.jpg" class="img-thumbnail rounded-circle" width="90"/>
			 <img src="img/bob.jpg" class="img-thumbnail rounded-circle" width="90"/>
			 <img src="img/dave.jpg" class="img-thumbnail rounded-circle" width="90"/>
<img src="img/jane.jpg" class="img-thumbnail rounded-circle" width="90"/>
			<img src="img/andile.jpg" class="img-thumbnail rounded-circle" width="90"/>
			<img src="img/lee.jpg" class="img-thumbnail rounded-circle" width="90"/>
		</div>
		</div>
		
		<div class="row container mx-auto">
		    <div class="column" id="posts"> 
			Loading content...
			</div>
		</div>
		

		
		<script src="js/jquery-3.7.1.min.js"></script>
		<script src="js/bootstrap.bundle.js"></script>
		<script>
		   var rooPath;
			
			function init(){
				rootPath = "https://mysite.itvarsity.org/api/mini-blog/";
				
				document.getElementById("getAll").addEventListener('click', getAllPosts);
              document.getElementById("getLatest").addEventListener('click', getLatestPosts);
				document.getElementById("getPopular").addEventListener('click', getPopularPosts);
										
			  getAllPosts();					
			}
			
			function getAllPosts(){
				category = "getAll";
				fetchPosts(category);
				setActiveLink(category);
					
			}
					
				
			function getPopularPosts(){
				category = "getPopular";
					fetchPosts(category);
				setActiveLink(category);
			}
			         
				
			function getLatestPosts(){
				category = "getLatest";
				fetchPosts(category);
				setActiveLink(category);
				 
			}
			
			function fetchPosts(category){
				fetch(rootPath + 'get-posts/?category=' + category)
				.then(function(response){
					return response.json();
				})
				.then(function(data){
					displayPosts(data);
				})
			}
		
		function displayPosts(data){
			var output = "";
			
			for(a = 0; a < data.length; a++){
				output +=`
<div class="card mb-4 box-shadow">
	 <div class="card-header">
		 <h4 class="my-0 font-weight-normal">${data[a][0]}</h4>
		</div>
		 <div class="card-body">
			<img src="${rootPath}/uploads/${data[a][3]}" class="card-img-top"/>
			<p class="card-text">${data[a][1]}</p>
		<div class="d-flex justify-content-between align-items-center">
			<div class="btn-group">
				<button type="button" class="btn btn-lg btn-link"><i class="far fa-heart"></i></button>
					
					
				<button type="button" class="btn btn-lg btn-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.2by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M123.6 391.3c12.9-9.4 29.6-11.8 44.6-6.4c26.5 9.6 56.2 15.1 87.8 15.1c124.7 0 208-80.5 208-160s-83.3-160-208-160S48 160.5 48 240c0 32 12.4 62.8 35.7 89.2c8.6 9.7 12.8 22.5 11.8 35.5c-1.4 18.1-5.7 34.7-11.3 49.4c17-7.9 31.1-16.7 39.4-22.7zM21.2 431.9c1.8-2.7 3.5-5.4 5.1-8.1c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208s-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6c-15.1 6.6-32.3 12.6-50.1 16.1c-.8 .2-1.6 .3-2.4 .5c-4.4 .8-8.7 1.5-13.2 1.9c-.2 0-.5 .1-.7 .1c-5.1 .5-10.2 .8-15.3 .8c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c4.1-4.2 7.8-8.7 11.3-13.5c1.7-2.3 3.3-4.6 4.8-6.9c.1-.2 .2-.3 .3-.5z"/></svg></button>
			 <button type="button" class="btn btn-lg btn-link"><i class="fa fa-retweet"></i></button>
				</div>
			<small class="text-muted"${data[a][2]}</small>
		</div>
				
	</div>
			
</div>


                             `;
			}
	document.getElementById("posts").innerHTML = output;
		}
			
			function setActiveLink(id){
			document.getElementById("getAll").classList.remove("active");
			document.getElementById("getPopular").classList.remove("active");
				
			document.getElementById("getLatest").classList.remove("active");
				
			document.getElementById(id).classList.add99("active");
			}
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
		</script>
	</body>
</html>
